load("@rules_cc//cc:defs.bzl", "cc_library")

package(default_visibility = ["//visibility:public"])

# Tree-sitter core parsing library
# Contains minimal essential C source files for parsing functionality
cc_library(
    name = "core",
    srcs = [
        "lib/src/alloc.c",  # Memory allocation utilities
        "lib/src/language.c",  # Language definition handling
        "lib/src/tree.c",  # Syntax tree data structures
    ],
    hdrs = glob([
        "lib/include/**/*.h",  # Public API headers
        "lib/src/**/*.h",  # Internal implementation headers
    ]),
    copts = [
        "-std=gnu99",  # GNU C99 standard
        "-fPIC",  # Position-independent code for shared libraries
        "-DTREE_SITTER_HIDE_SYMBOLS",  # Hide internal symbols from public API
    ],
    includes = [
        "lib/include",  # Public header directory
        "lib/src",  # Internal header directory
    ],
)
